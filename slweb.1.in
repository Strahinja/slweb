'\"
.\" Manpage for slweb(1)
.
.mso an-ext.tmac
.de CDS
.EX
.RS \\$1
.sp 1
..
.de CDE
.sp 1
.RE
.EE
..
.
.TH SLWEB "1" "%DATE%" "slweb %VERSION%" "General Commands Manual"
.SH NAME
slweb \- Simple static website generator
.
.SH SYNOPSIS
.
.SY slweb
.OP "\-h \fR|\fP \-\-help"
.YS
.
.SY slweb
.OP "\-v \fR|\fP \-\-version"
.YS
.
.SY slweb
.OP "\-b \fR|\fP \-\-body-only"
.OP "\-d \fR|\fP \-\-basedir" directory
.RI [ filename ]
.YS
.
.SH COPYRIGHT
slweb Copyright \(co 2020 Strahinya Radich.
.br
This program is licensed under GNU GPL v3 or later. See the file
.I LICENSE
in the slweb repository for details.
.
.SH DESCRIPTION
.B Slweb
is a static website generator which aims at being simplistic. It transforms 
custom Markdown-like syntax into
.SM HTML.
.
.SH OPTIONS
.
.TP
.B \-b
.TQ
.B \-\-body\-only
.br
Only add the contents of the \fC<body>\fR tag, skipping \fC<html>\fR and
\fC<head>\fR.
.
.TP
.BI \-d " directory"
.TQ
.BI \-\-basedir " directory"
.br
Set the base directory as a reference point to normalize paths in includes and
.I incdir
directive (the argument to
.B --relative-to
option for the
.BR realpath (1)
command). Defaults to the current directory.
.
.TP
.B \-h
.TQ
.B \-\-help
.br
Print this usage information screen.
.
.TP
.B \-v
.TQ
.B \-\-version
.br
Print program version and exit.
.
.SH REFERENCE
.
.LP
Files processed by
.B slweb
are using a minimal subset of Markdown with added directives.  
.
.SS Supported Markdown features
.
.IP \[bu] 4
.BR Paragraphs .
Text surrounded by newlines will be put inside \fC<p></p>\fR tags.
.
.IP \[bu]
.BR Headings .
A line starting with \fC#\fR followed by space will be put inside
\fC<h?></h?>\fR, where \fC?\fR stands for 1-4, depending on the number of
hash signs.
.
.IP \[bu]
.BR Bold/italic .
Text inside \fC*asterisks*\fR or \fC_underlines_\fR will be put inside
\fC<em></em>\fR. Text inside \fC**double asterisks**\fR or \fC__double
underlines__\fR will be put inside \fC<strong></strong>\fR. \fC***More than
two*** of the ___same symbol___\fR should be avoided.
.
.IP \[bu]
.BR Backticks .
Text inside \fC`backticks`\fR will be put inside \fC<code></code>\fR (both
backticks need to be on the same line).
.
.IP \[bu]
.BR Blockquotes .
Starting the line with \fC>\fR will surround it with a \fC<blockquote>\fR tag.
Multiple lines are supported.
.
.IP \[bu]
.BR Links .
The construct \fC[A link](https://example.com)\fR will be converted into \fC<a
href="https://example.com">A link</a>\fR.
.IP
Special case is the form \fC[=somemacro Link title](https://anything)\fR which
prepends the body of a macro
.I somemacro
into the \fC<a></a>\fR tag (here broken into multiple lines for clarity):
.CDS 8
<a href="https://anything">
<!-- contents of somemacro -->
Link title</a>
.CDE
.IP
This can, for example, be used to add
.SM SVG
icons to links. See
.BR Macros .
.IP
Also, the form \fC[(Link title)](http://asite.com)\fR will surround the link
title (text between \fC<a></a>\fR tags) with \fC<span></span>\fR, like so:
.CDS 4
<a href="http://asite.com"><span>Link title</span></a>
.CDE
.IP
This allows for separate styling of link text. It can be combined with the
macro-form:
.CDS 4
[=somemacro (Link title)](http://asite.com)
.CDE
.IP
It will prepend the body of a macro
.I somemacro
outside of the \fC<span></span>\fR:
.CDS 4
<a href="http://asite.com">
<!-- contents of somemacro -->
<span>Link title</span></a>
.CDE
.
.IP \[bu]
.BR "Line breaks" .
Two spaces followed by a newline will become \fC<br />\fR.
.
.SS Directives
.
.IP \[bu] 4
.BR "General tags" .
Directive \fC{sometag}{/sometag}\fR will be transformed into
\fC<sometag></sometag>\fR.
.
.RS
.IP \- 4
.BR "Class attributes" .
Directive \fC{tag.myclass mysecondclass}{/tag}\fR will be transformed into
\fC<tag class="myclass mysecondclass"></tag>\fR. Only one class attribute is
permitted per tag directive (subsequent dots will be inserted as part of the
\fCclass\fR attribute), but you can include multiple classes by separating them
with a space, just like in
.SM HTML,
and you can have both a class attribute and an id attribute per tag.

A variation of this is to use a special form \fC{.myclass}{/.myclass}\fR, which
will be transformed into \fC<div class="myclass"></div>\fR.
.
.IP \-
.BR "Id attributes" .
Directive \fC{tag#myid}{/tag}\fR will be transformed into \fC<tag
id="myid"></tag>\fR. Only one id attribute is permitted per tag directive
(subsequent hash signs will be included as part of the \fCid\fR attribute), and
you can have both an id attribute and a class attribute per tag.

A variation of this is to use a special form \fC{#myid}{/#myid}\fR, which will
be transformed into \fC<div id="myid"></div>\fR.
.RE
.
.IP \[bu] 4
.BR Includes .
Directive \fC{include "somefile"}\fR will fork, parse
.I somefile.slw
(related to
.IR basedir )
and output the resulting
.SM HTML
as if the option \fC\-\-body\-only\fR was specified. All macros and
.SM YAML
variables will be preserved.
.
.IP \[bu] 4
.BR Macros .
Macros can be declared using the directive \fC{=macroname}{/=macroname}\fR,
where
.I macroname
is the name of the macro. Anything between those two tags will then become the
body of a macro. Whenever \fC{=macroname}\fR is subsequently encountered in the
file, it will be replaced by the macro body.
.
.IP \[bu] 4
.BR "Subdirectory inclusion (blogging directive)" .
The command \fC{incdir \fInum\fC =\fImacroname\fC}\fR
.RI ( num
and
.I macroname
are optional) will be expanded as follows:
.
.RS
.nr list 1 1
.IP \n[list]. 4
A \fC<ul class="incdir">\fR tag will be inserted into the document instead of
the directive.
.
.IP \n+[list].
For every subdirectory of
.IR basedir , 
up to
.I num
(if present) or 5 (if omitted) total subdirectories, a \fC<li>\fR
tag will be inserted into the \fCul\fR tag.
.
.IP \n+[list].
A \fC<details>\fR tag will be inserted into each \fC<li>\fR tag.
.
.IP \n+[list].
Inside the \fC<details>\fR tag, a \fC<summary>\fR tag will be inserted with the
name of the subdirectory. If
.I macroname
is present, the name of the subdirectory will be prepended with the body of a
macro
.I macroname
(for example, this can be used to include custom
.SM SVG
files as arrows).
.
.IP \n+[list].
After the \fC<summary>\fR tag a \fC<div>\fR tag will be inserted into
\fC<details>\fR, containing the concatenated output from processing each of the
.I .slw
files inside that subdirectory in reverse lexicographical order, in a manner
similar to the
.I include
directive. (See
.BR Includes " and " date ", " ext-in-permalink ", " permalink-url ", " 
.BR samedir-permalink " variables.)"
.RE
.
.IP \[bu]
.BR "Previous Git commit information" .
Directive \fC{git\-log}\fR is converted into a div with the id \fCgit\-log\fR
containing the information about the previous commit (as having information
about the current commit would be impossible).
.
.IP \[bu]
.BR "Brand \[lq]watermark\[rq]" .
Directive \fC{made\-by}\fR is converted into a div with the id \fCmade\-by\fR
containing the \[lq]watermark\[rq] text and a link to the
.B slweb
home page.
.
.SS Special YAML variables
.
.IP \[bu] 4
.BR date .
If present, this variable, assumed to be in
.SM ISO
8601
.SM UTC
datetime format, will be parsed to determine the timestamp in permalinks
generated by the
.I incdir
directive. The actual values used depend on the source-level constant
.IR timestamp_format .
.
.IP \[bu]
.BR ext\-in\-permalink .
If set to \[lq]0\[rq], permalinks generated by the
.I incdir
directive will not have the extension included in the
.I href
attribute. For example, instead of \fCblog/2020/august.html\fR, the resulting
permalink will have \fCblog/2020/august\fR. 
.
.IP \[bu]
.BR favicon\-url .
if present, this
.SM URL
will be used as a favicon
.SM URL
instead of the default, \fC/favicon.ico\fR.
.
.IP \[bu]
.BR permalink\-url .
If present, this
.SM URL
will completely replace the link used in the
.I href
attribute of permalinks generated by the
.I incdir
directive. This variable is more useful in individual
.I .slw
files inside the subdirectories of the
.I basedir
provided to the
.I incdir
directive.
.
.IP \[bu]
.BR samedir\-permalink .
If set to \[lq]1\[rq], path in the permalink generated by the presence of
.I date 
variable will be converted (with
.BR realpath (1))
to be relative to the directory containing the input file. Otherwise, directory
in the permalink will remain unchanged.
.
.IP \[bu]
.BR site\-desc .
The contents of this variable will be inserted as the value of the
.I content
attribute of the \fC<meta name="description">\fR tag.
.
.IP \[bu]
.BR site\-name .
The contents of this variable will be inserted inside the \fC<title></title>\fR
tags.
.
.IP \[bu]
.BR stylesheet .
The contents of this variable will be treated as a
.SM CSS
file name to be included using the \fC<link rel="stylesheet" />\fR tag. You can
have more than one 
.I stylesheet
declaration per 
.I .slw
file.
.
.IP \[bu]
.BR title .
If present, contents of this variable will be prepended to the body as a heading
with the level determined by the 
.I title\-heading\-level 
variable, defaulting
to 2.  (\fCtitle: Some title\fR  becomes  \fC<h2>Some title</h2>\fR).
.
.IP \[bu]
.BR title\-heading\-level .
See
.BR title .
.
.SS Special macros
.
.IP \[bu] 4
.BR permalink .
If present, the body of this macro will be inserted into permalinks generated by
the
.I incdir
directive, similar to the macro\-form of links.
.
.SH "SEE ALSO"
.BR sed (1)
.
.SH EXAMPLES
.
.LP
Given the file \fCindex.slw\fR in the current directory:
.CDS 4
---
site-name: Test website
site-desc: My first website in slweb
---

{main}
# Hello world

This is an _example_ of a statically generated HTML.

{/main}
.CDE
after using the command:
.CDS 4
$ slweb index.slw > index.html
.CDE
file \fCindex.html\fR contains:
.CDS 4
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test website</title>
    <meta charset="utf8" />
    <meta name="description" content="My first website in slweb" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="slweb" />
</head>
<body>

<main>
<h1>Hello world</h1>

<p>This is an <em>example</em> of a statically generated HTML.</p>

</main>
</body>
</html>
.CDE
.
.SH "KNOWN LIMITATIONS"
.
.IP \[bu] 4
Currently there is no way to determine where the paragraph inside a tag should
begin and end without adding blank lines or using the \fC{p}{/p}\fR notation.
For example, the code
.
.CDS 8
{tag}
First paragraph

Second paragraph
{/tag}
.CDE
.
.IP
will produce
.
.CDS 8
<tag>
First paragraph

<p>Second paragraph
</tag></p>
.CDE
.
.IP
You can suppress the paragraph starting/ending tags by prepending blank lines
with a backslash, like this:
.
.CDS 8
{tag}
First paragraph
\[rs]
Second paragraph
{/tag}
.CDE
.
.IP
which will produce
.
.CDS 8
<tag>
First paragraph

Second paragraph
</tag>
.CDE
.
.IP
Adding blank lines helps, if paragraphs are desired:
.
.CDS 8
{tag}

First paragraph

Second paragraph

{/tag}
.CDE
.
.IP
will produce
.
.CDS 8
<tag>
<p>First paragraph</p>

<p>Second paragraph</p>
</tag>
.CDE
.
.SH BUGS
.
.LP
Bugs can be reported using the Github issue tracker at:
.UR https://\:github.com/\:Strahinja/\:slweb/\:issues
.UE
.\" vim: set filetype=groff:

