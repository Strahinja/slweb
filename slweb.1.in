'\"
.\" Manpage for slweb(1)
.
.mso an-ext.tmac
.
.TH SLWEB "1" "%DATE%" "slweb %VERSION%" "General Commands Manual"
.SH NAME
slweb \- Simple static website generator
.
.SH SYNOPSIS
.SY slweb
.RI [ options ]
.RI [ filename ]
.YS
.
.SH COPYRIGHT
slweb Copyright \(co 2020 Strahinya Radich.
.
.SH DESCRIPTION
.B Slweb
is a static website generator which aims at being simplistic. It uses
.BR sed (1)
to transform a custom Markdown-like syntax into
.SM HTML.
.
.SH OPTIONS
.
.TP
.B \-b
.TQ
.B \-\-body\-only
.br
Only add the contents of the \fC<body>\fR tag, skipping \fC<html>\fR and
\fC<head>\fR.
.
.TP
.B \-d <\fIdirectory\fR>
.TQ
.B \-\-basedir <\fIdirectory\fR>
.br
Set the base directory as a reference point to normalize paths in local links
(the argument to
.B --relative-to
option for the
.BR realpath (1)
command).
.
.TP
.B \-h
.TQ
.B \-\-help
.br
Print this usage information screen.
.
.TP
.B \-v
.TQ
.B \-\-version
.br
Print program version and exit.
.
.SH REFERENCE
.
.PP
Files processed by
.B slweb
are using a minimal subset of Markdown with added directives.  Supported 
.B "Markdown features"
are:
.IP \[bu] 4
.BR Paragraphs .
Text surrounded by newlines will be put inside \fC<p></p>\fR tags.
.
.IP \[bu]
.BR Headings .
A line starting with \fC#\fR followed by space will be put inside
\fC<h?></h?>\fR, where \fC?\fR stands for 1-4, depending on the number of
hashtags.
.
.IP \[bu]
.BR "Bold/italic (limited)" .
Text inside \fC*asterisks*\fR or \fC_underlines_\fR will be put inside
\fC<em></em>\fR. Text inside \fC**double asterisks**\fR will be put inside
\fC<strong></strong>\fR.
.
.IP \[bu]
.BR Backticks .
Text inside \fC`backticks`\fR will be put inside \fC<code></code>\fR (one per
line, both backticks need to be on the same line).

.
.IP \[bu]
.BR "Links (limited)" .
The construct \fC[A link](https://example.com)\fR will be converted into \fC<a
href="https://example.com">A link</a>\fR.

Special case is the form \fC[=somemacro Link title](https://anything)\fR which
prepends the body of a macro
.I somemacro
into the \fC<a></a>\fR tag. See
.BR Macros .

Also, the form \fC[(Link title)](http://asite.com)\fR will surround the link
title (text between \fC<a></a>\fR tags) with \fC<span></span>\fR, like so:
.EX
.in +4
<a href="http://asite.com"><span>Link title</span></a>
.EE
.in -4
This allows for separate styling of link text. It can be combined with the
macro-form:
.EX
.in +4
[=somemacro (Link title)](http://asite.com)
.EE
.in -4
It will prepend the body of a macro
.I somemacro
outside of the \fC<span></span>\fR.
.
.IP \[bu]
.BR "Line breaks" .
Two spaces followed by a newline will be turned into \fC<br />\fR.
.
.PP
.BR "Directives " include:
.
.IP \[bu] 4
.BR "General tags" .
Directive \fC{sometag}{/sometag}\fR will be transformed into
\fC<sometag></sometag>\fR.
.
.RS
.IP \- 4
.BR "Class attributes" .
Directive \fC{tag.myclass mysecondclass}{/tag}\fR will be transformed into
\fC<tag class="myclass mysecondclass"></tag>\fR. Only one class attribute is
permitted per tag directive, but you can include multiple classes by separating
them with a space, just like in
.SM HTML,
and you can have both a class attribute and an id attribute per tag.

A variation of this is to use a special form \fC{.myclass}{/.myclass}\fR, which
will be transformed into \fC<div class="myclass"></div><!--.myclass-->\fR.
.
.IP \- 4
.BR "Id attributes" .
Directive \fC{tag#myid}{/tag}\fR will be transformed into \fC<tag
id="myid"></tag>\fR. Only one id attribute is permitted per tag directive, and
you can have both an id attribute and a class attribute per tag.

A variation of this is to use a special form \fC{#myid}{/#myid}\fR, which will
be transformed into \fC<div id="myid"></div><!--#myid-->\fR.
.RE
.
.IP \[bu] 4
.BR Includes .
Directive \fC{include "somefile"}\fR will run \fCslweb -b\fR on
.I somefile.slw
(related to the directory containing the file containing the directive) and
include the resulting
.SM HTML.
Directive needs to start at the beginning of the line.
.
.IP \[bu] 4
.BR Macros .
Macros can be declared using the directive \fC{=macroname}{/=macroname}\fR,
where
.I macroname
is the name of the macro. Anything between those two tags will then become the
body of a macro. Whenever \fC{=macroname}\fR is subsequently encountered in the
file, it will be replaced by the macro body.
.
.IP \[bu] 4
.BR "Subdirectory inclusion (blogging directive)" .
The command \fC{lsdirs \fInum\fC =\fImacroname\fC}\fR
.RI ( num
and
.I macroname
are optional) will be expanded as follows:
.
.RS
.IP 1. 4
A \fC<ul class="dir">\fR tag will be inserted into the document instead of the
directive.
.
.IP 2. 4
For every subdirectory of the directory containing the input file, up to
.I num
(if present) or 5 (if omitted) total subdirectories, a \fC<li>\fR
tag will be inserted into the \fC<ul class="dir">\fR tag.
.
.IP 3. 4
A \fC<details>\fR tag will be inserted into each \fC<li>\fR tag.
.
.IP 4. 4
Inside the \fC<details>\fR tag, a \fC<summary>\fR tag will be inserted with the
name of the subdirectory. If
.I macroname
is present, the name of the subdirectory will be prepended with the body of a
macro
.IR macroname .
.
.IP 5. 4
After the \fC<summary>\fR tag a \fC<div>\fR tag will be inserted into
\fC<details>\fR, containing the concatenated contents of each
.I .slw
file inside that subdirectory in reverse lexicographical order (\fCsort -r\fR).
For each file included in this manner, a \fC<h1>\fR tag will be prepended,
containing the contents of that file's \fCtitle:\fR
.SM YAML
variable.
.
.RE
.
.IP \[bu]
.BR "Previous Git commit information" .
Directive \fC{git\-log}\fR is converted into a div with the id \fCgit\-log\fR
containing the information about the previous commit (as having information
about the current commit would be impossible).
.
.IP \[bu]
.BR "Brand \[lq]watermark\[rq]" .
Directive \fC{made\-by}\fR is converted into a div with the id \fCmade\-by\fR
containing the \[lq]watermark\[rq] text and a link to the
.B slweb
home page.
.
.PP
.B Special YAML variables
supported by slweb are:
.
.IP \[bu] 4
.BR site-name .
The contents of this variable will be inserted inside the \fC<title></title>\fR
tags.
.
.IP \[bu] 4
.BR site-desc .
The contents of this variable will be inserted as the value of the
.I content
attribute of the \fC<meta name="description">\fR tag.
.
.IP \[bu] 4
.BR stylesheet .
The contents of this variable will be treated as a
.sm CSS
file name to be included using the \fC<link rel="stylesheet" />\fR tag.
.
.SH "SEE ALSO"
.BR sed (1)
.
.SH EXAMPLES
.
.PP
GIven the file \fCindex.slw\fR in the current directory:
.EX
.in +4
.sp
site-name: Test website
site-desc: My first website in slweb
---

{main}
# Hello world

This is an _example_ of a statically generated HTML.

{/main}
.in -4
.sp
.EE
after using the command:
.EX
.in +4
.sp
$ slweb index.slw > index.html
.in -4
.sp
.EE
file \fCindex.html\fR contains:
.EX
.in +4
.sp
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test website</title>
    <meta charset="utf8" />
    <meta name="description" content="My first website in slweb" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="slweb" />
</head>
<body>

<main>
<h1>Hello world</h1>

<p>This is an <em>example</em> of a statically generated HTML.</p>

</main>
</body>
</html>
.in -4
.sp
.EE
.
.SH BUGS
.
.PP
Bugs can be reported using the Github issue tracker at:
.UR https://\:github.com/\:Strahinja/\:slweb/\:issues
.UE

